<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedResearch Agent - Medical Research Analyzer</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .medical-gradient {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .score-circle {
            position: relative;
            width: 120px;
            height: 120px;
        }
        
        .score-circle svg {
            transform: rotate(-90deg);
        }
        
        .chat-message {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .upload-zone {
            border: 2px dashed #cbd5e0;
            transition: all 0.3s ease;
        }
        
        .upload-zone:hover {
            border-color: #4299e1;
            background-color: #ebf8ff;
        }
        
        .upload-zone.dragging {
            border-color: #3182ce;
            background-color: #bee3f8;
        }
        
        .paper-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .paper-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #4299e1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-success {
            background-color: #c6f6d5;
            color: #22543d;
        }
        
        .badge-warning {
            background-color: #feebc8;
            color: #744210;
        }
        
        .badge-info {
            background-color: #bee3f8;
            color: #2c5282;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // API Configuration
        const API_BASE_URL = 'http://localhost:3773';

        // Main App Component
        function MedResearchApp() {
            const [activeTab, setActiveTab] = useState('upload');
            const [papers, setPapers] = useState([]);
            const [messages, setMessages] = useState([]);
            const [inputMessage, setInputMessage] = useState('');
            const [loading, setLoading] = useState(false);
            const [synthesisReport, setSynthesisReport] = useState(null);

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <Header />

                    {/* Navigation Tabs */}
                    <NavigationTabs activeTab={activeTab} setActiveTab={setActiveTab} />

                    {/* Main Content */}
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {activeTab === 'upload' && (
                            <UploadSection papers={papers} setPapers={setPapers} />
                        )}
                        
                        {activeTab === 'analysis' && (
                            <AnalysisSection papers={papers} />
                        )}
                        
                        {activeTab === 'synthesis' && (
                            <SynthesisSection 
                                papers={papers} 
                                synthesisReport={synthesisReport}
                                setSynthesisReport={setSynthesisReport}
                            />
                        )}
                        
                        {activeTab === 'chat' && (
                            <ChatSection 
                                messages={messages}
                                setMessages={setMessages}
                                inputMessage={inputMessage}
                                setInputMessage={setInputMessage}
                                loading={loading}
                                setLoading={setLoading}
                            />
                        )}
                    </div>

                    {/* Footer */}
                    <Footer />
                </div>
            );
        }

        // Header Component
        function Header() {
            return (
                <header className="gradient-bg text-white shadow-lg">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center space-x-4">
                                <div className="bg-white rounded-full p-3">
                                    <i className="fas fa-microscope text-3xl text-indigo-600"></i>
                                </div>
                                <div>
                                    <h1 className="text-3xl font-bold">MedResearch Agent</h1>
                                    <p className="text-indigo-200 text-sm">Medical Research Paper Analyzer with AI-Powered Synthesis</p>
                                </div>
                            </div>
                            <div className="hidden md:flex items-center space-x-6">
                                <div className="text-center">
                                    <div className="text-2xl font-bold">0</div>
                                    <div className="text-xs text-indigo-200">Papers Analyzed</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold">A+</div>
                                    <div className="text-xs text-indigo-200">Avg Quality</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>
            );
        }

        // Navigation Tabs Component
        function NavigationTabs({ activeTab, setActiveTab }) {
            const tabs = [
                { id: 'upload', name: 'Upload Papers', icon: 'fa-upload' },
                { id: 'analysis', name: 'Analysis', icon: 'fa-chart-line' },
                { id: 'synthesis', name: 'Multi-Paper Synthesis', icon: 'fa-layer-group' },
                { id: 'chat', name: 'Q&A Chat', icon: 'fa-comments' }
            ];

            return (
                <div className="bg-white shadow">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <nav className="flex space-x-8">
                            {tabs.map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`py-4 px-3 border-b-2 font-medium text-sm transition-colors ${
                                        activeTab === tab.id
                                            ? 'border-indigo-500 text-indigo-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                    }`}
                                >
                                    <i className={`fas ${tab.icon} mr-2`}></i>
                                    {tab.name}
                                </button>
                            ))}
                        </nav>
                    </div>
                </div>
            );
        }

        // Upload Section Component
        function UploadSection({ papers, setPapers }) {
            const [dragging, setDragging] = useState(false);
            const fileInputRef = useRef(null);

            const handleDragEnter = (e) => {
                e.preventDefault();
                setDragging(true);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                setDragging(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setDragging(false);
                const files = Array.from(e.dataTransfer.files);
                handleFiles(files);
            };

            const handleFileSelect = (e) => {
                const files = Array.from(e.target.files);
                handleFiles(files);
            };

            const handleFiles = (files) => {
                const pdfFiles = files.filter(f => f.type === 'application/pdf');
                const newPapers = pdfFiles.map(file => ({
                    id: `paper_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                    title: file.name.replace('.pdf', ''),
                    file: file,
                    uploadDate: new Date().toISOString(),
                    status: 'processing',
                    score: null
                }));
                
                setPapers(prev => [...prev, ...newPapers]);
                
                // Simulate processing
                newPapers.forEach(paper => {
                    setTimeout(() => {
                        setPapers(prev => prev.map(p => 
                            p.id === paper.id 
                                ? { ...p, status: 'completed', score: Math.floor(Math.random() * 30) + 70 }
                                : p
                        ));
                    }, 2000);
                });
            };

            return (
                <div className="space-y-6">
                    {/* Upload Zone */}
                    <div
                        className={`upload-zone rounded-lg p-12 text-center cursor-pointer ${dragging ? 'dragging' : ''}`}
                        onDragEnter={handleDragEnter}
                        onDragOver={handleDragEnter}
                        onDragLeave={handleDragLeave}
                        onDrop={handleDrop}
                        onClick={() => fileInputRef.current.click()}
                    >
                        <input
                            ref={fileInputRef}
                            type="file"
                            multiple
                            accept=".pdf"
                            onChange={handleFileSelect}
                            className="hidden"
                        />
                        <i className="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                        <h3 className="text-xl font-semibold text-gray-700 mb-2">
                            Drop PDF research papers here or click to browse
                        </h3>
                        <p className="text-gray-500">Supports multiple files</p>
                    </div>

                    {/* Uploaded Papers List */}
                    {papers.length > 0 && (
                        <div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                Uploaded Papers ({papers.length})
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {papers.map(paper => (
                                    <PaperCard key={paper.id} paper={paper} />
                                ))}
                            </div>
                        </div>
                    )}

                    {/* Getting Started Guide */}
                    {papers.length === 0 && (
                        <div className="bg-blue-50 rounded-lg p-6 border border-blue-200">
                            <h3 className="text-lg font-semibold text-blue-900 mb-3">
                                <i className="fas fa-info-circle mr-2"></i>
                                Getting Started
                            </h3>
                            <ol className="space-y-2 text-blue-800">
                                <li className="flex items-start">
                                    <span className="font-semibold mr-2">1.</span>
                                    Upload one or more medical research papers (PDF format)
                                </li>
                                <li className="flex items-start">
                                    <span className="font-semibold mr-2">2.</span>
                                    Wait for automatic analysis and evidence quality scoring
                                </li>
                                <li className="flex items-start">
                                    <span className="font-semibold mr-2">3.</span>
                                    View individual paper analysis or compare multiple papers
                                </li>
                                <li className="flex items-start">
                                    <span className="font-semibold mr-2">4.</span>
                                    Ask questions about the papers in the Q&A Chat
                                </li>
                            </ol>
                        </div>
                    )}
                </div>
            );
        }

        // Paper Card Component
        function PaperCard({ paper }) {
            return (
                <div className="paper-card bg-white rounded-lg p-4 card-shadow">
                    <div className="flex items-start justify-between mb-3">
                        <div className="flex-1">
                            <h3 className="font-semibold text-gray-800 mb-1 line-clamp-2">
                                {paper.title}
                            </h3>
                            <p className="text-xs text-gray-500">
                                {new Date(paper.uploadDate).toLocaleString()}
                            </p>
                        </div>
                        <i className="fas fa-file-pdf text-2xl text-red-500 ml-2"></i>
                    </div>
                    
                    {paper.status === 'processing' && (
                        <div className="flex items-center justify-center py-4">
                            <div className="loading-spinner"></div>
                            <span className="ml-3 text-sm text-gray-600">Processing...</span>
                        </div>
                    )}
                    
                    {paper.status === 'completed' && paper.score && (
                        <div>
                            <div className="flex items-center justify-between mb-2">
                                <span className="text-sm font-medium text-gray-600">Evidence Quality</span>
                                <span className={`badge ${
                                    paper.score >= 85 ? 'badge-success' : 
                                    paper.score >= 70 ? 'badge-info' : 
                                    'badge-warning'
                                }`}>
                                    {paper.score >= 85 ? 'Excellent' : 
                                     paper.score >= 70 ? 'Good' : 'Fair'}
                                </span>
                            </div>
                            <div className="flex items-center">
                                <div className="flex-1 bg-gray-200 rounded-full h-2 mr-2">
                                    <div 
                                        className={`h-2 rounded-full ${
                                            paper.score >= 85 ? 'bg-green-500' : 
                                            paper.score >= 70 ? 'bg-blue-500' : 
                                            'bg-yellow-500'
                                        }`}
                                        style={{ width: `${paper.score}%` }}
                                    ></div>
                                </div>
                                <span className="text-sm font-bold text-gray-700">{paper.score}</span>
                            </div>
                        </div>
                    )}
                    
                    <button className="w-full mt-3 bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition-colors text-sm font-medium">
                        View Full Analysis
                    </button>
                </div>
            );
        }

        // Analysis Section Component
        function AnalysisSection({ papers }) {
            if (papers.length === 0) {
                return (
                    <div className="text-center py-16">
                        <i className="fas fa-chart-line text-6xl text-gray-300 mb-4"></i>
                        <h3 className="text-xl font-semibold text-gray-600 mb-2">No Papers to Analyze</h3>
                        <p className="text-gray-500">Upload papers first to see detailed analysis</p>
                    </div>
                );
            }

            const completedPapers = papers.filter(p => p.status === 'completed');
            const avgScore = completedPapers.length > 0
                ? Math.round(completedPapers.reduce((sum, p) => sum + p.score, 0) / completedPapers.length)
                : 0;

            return (
                <div className="space-y-6">
                    {/* Summary Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <StatCard 
                            icon="fa-file-alt"
                            value={papers.length}
                            label="Total Papers"
                            color="blue"
                        />
                        <StatCard 
                            icon="fa-check-circle"
                            value={completedPapers.length}
                            label="Analyzed"
                            color="green"
                        />
                        <StatCard 
                            icon="fa-star"
                            value={avgScore}
                            label="Avg Quality Score"
                            color="purple"
                        />
                        <StatCard 
                            icon="fa-layer-group"
                            value={completedPapers.length >= 2 ? "Ready" : "Upload More"}
                            label="Synthesis Status"
                            color="indigo"
                        />
                    </div>

                    {/* Detailed Analysis */}
                    <div className="bg-white rounded-lg card-shadow p-6">
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">Paper Analysis Details</h2>
                        <div className="space-y-4">
                            {completedPapers.map(paper => (
                                <div key={paper.id} className="border-l-4 border-indigo-500 pl-4 py-2">
                                    <h3 className="font-semibold text-gray-800">{paper.title}</h3>
                                    <div className="mt-2 flex items-center space-x-4 text-sm">
                                        <span className="text-gray-600">
                                            <i className="fas fa-calendar mr-1"></i>
                                            {new Date(paper.uploadDate).toLocaleDateString()}
                                        </span>
                                        <span className={`font-medium ${
                                            paper.score >= 85 ? 'text-green-600' : 
                                            paper.score >= 70 ? 'text-blue-600' : 
                                            'text-yellow-600'
                                        }`}>
                                            <i className="fas fa-award mr-1"></i>
                                            Score: {paper.score}/100
                                        </span>
                                    </div>
                                    <p className="mt-2 text-gray-600 text-sm">
                                        Study Type: Randomized Controlled Trial • Sample Size: 500 • Year: 2023
                                    </p>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Stat Card Component
        function StatCard({ icon, value, label, color }) {
            const colorClasses = {
                blue: 'bg-blue-500',
                green: 'bg-green-500',
                purple: 'bg-purple-500',
                indigo: 'bg-indigo-500'
            };

            return (
                <div className="bg-white rounded-lg card-shadow p-6">
                    <div className="flex items-center justify-between">
                        <div>
                            <p className="text-3xl font-bold text-gray-800">{value}</p>
                            <p className="text-sm text-gray-600 mt-1">{label}</p>
                        </div>
                        <div className={`${colorClasses[color]} rounded-full p-3`}>
                            <i className={`fas ${icon} text-white text-xl`}></i>
                        </div>
                    </div>
                </div>
            );
        }

        // Synthesis Section Component
        function SynthesisSection({ papers, synthesisReport, setSynthesisReport }) {
            const [generating, setGenerating] = useState(false);
            const completedPapers = papers.filter(p => p.status === 'completed');

            const generateSynthesis = () => {
                setGenerating(true);
                setTimeout(() => {
                    setSynthesisReport({
                        paperCount: completedPapers.length,
                        consensusFindings: [
                            'HbA1c reduction consistently reported across all studies',
                            'Treatment well-tolerated with minimal side effects',
                            'Significant improvement in glycemic control observed'
                        ],
                        contradictions: [
                            {
                                issue: 'Optimal dosing',
                                positionA: '3 studies used 1000mg twice daily',
                                positionB: '2 studies used 500mg three times daily'
                            }
                        ],
                        evidenceStrength: 82,
                        confidence: 'High confidence - Strong, consistent evidence'
                    });
                    setGenerating(false);
                }, 2000);
            };

            if (completedPapers.length < 2) {
                return (
                    <div className="text-center py-16">
                        <i className="fas fa-layer-group text-6xl text-gray-300 mb-4"></i>
                        <h3 className="text-xl font-semibold text-gray-600 mb-2">Need More Papers</h3>
                        <p className="text-gray-500">Upload at least 2 papers to generate multi-paper synthesis</p>
                        <p className="text-sm text-gray-400 mt-2">Currently: {completedPapers.length} paper(s)</p>
                    </div>
                );
            }

            return (
                <div className="space-y-6">
                    {!synthesisReport && (
                        <div className="bg-white rounded-lg card-shadow p-8 text-center">
                            <i className="fas fa-layer-group text-5xl text-indigo-600 mb-4"></i>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">
                                Ready to Synthesize {completedPapers.length} Papers
                            </h2>
                            <p className="text-gray-600 mb-6">
                                Generate a comprehensive multi-paper analysis to identify consensus, contradictions, and overall evidence strength
                            </p>
                            <button
                                onClick={generateSynthesis}
                                disabled={generating}
                                className="medical-gradient text-white px-8 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50"
                            >
                                {generating ? (
                                    <>
                                        <i className="fas fa-spinner fa-spin mr-2"></i>
                                        Generating Synthesis...
                                    </>
                                ) : (
                                    <>
                                        <i className="fas fa-magic mr-2"></i>
                                        Generate Multi-Paper Synthesis
                                    </>
                                )}
                            </button>
                        </div>
                    )}

                    {synthesisReport && (
                        <div className="space-y-6">
                            {/* Header */}
                            <div className="bg-white rounded-lg card-shadow p-6">
                                <div className="flex items-center justify-between">
                                    <div>
                                        <h2 className="text-2xl font-bold text-gray-800">
                                            Multi-Paper Synthesis Report
                                        </h2>
                                        <p className="text-gray-600 mt-1">
                                            Analysis of {synthesisReport.paperCount} research papers
                                        </p>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-4xl font-bold text-indigo-600">
                                            {synthesisReport.evidenceStrength}
                                        </div>
                                        <div className="text-sm text-gray-600">Overall Evidence</div>
                                    </div>
                                </div>
                            </div>

                            {/* Consensus Findings */}
                            <div className="bg-white rounded-lg card-shadow p-6">
                                <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                    <i className="fas fa-check-circle text-green-500 mr-2"></i>
                                    Consensus Findings
                                </h3>
                                <ul className="space-y-3">
                                    {synthesisReport.consensusFindings.map((finding, idx) => (
                                        <li key={idx} className="flex items-start">
                                            <span className="bg-green-100 text-green-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-semibold mr-3 mt-0.5">
                                                {idx + 1}
                                            </span>
                                            <span className="text-gray-700">{finding}</span>
                                        </li>
                                    ))}
                                </ul>
                            </div>

                            {/* Contradictions */}
                            <div className="bg-white rounded-lg card-shadow p-6">
                                <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                    <i className="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
                                    Contradictions & Debates
                                </h3>
                                {synthesisReport.contradictions.map((contra, idx) => (
                                    <div key={idx} className="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                                        <p className="font-semibold text-gray-800 mb-2">{contra.issue}</p>
                                        <div className="space-y-1 text-sm text-gray-700">
                                            <p>• Position A: {contra.positionA}</p>
                                            <p>• Position B: {contra.positionB}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Confidence Level */}
                            <div className="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg card-shadow p-6 text-white">
                                <h3 className="text-xl font-bold mb-2">Confidence Assessment</h3>
                                <p className="text-indigo-100">{synthesisReport.confidence}</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Chat Section Component
        function ChatSection({ messages, setMessages, inputMessage, setInputMessage, loading, setLoading }) {
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const sendMessage = async () => {
                if (!inputMessage.trim()) return;

                const userMessage = {
                    id: Date.now(),
                    role: 'user',
                    content: inputMessage,
                    timestamp: new Date().toISOString()
                };

                setMessages(prev => [...prev, userMessage]);
                setInputMessage('');
                setLoading(true);

                // Simulate API call
                setTimeout(() => {
                    const botMessage = {
                        id: Date.now() + 1,
                        role: 'assistant',
                        content: `Based on the uploaded research papers, ${inputMessage.toLowerCase().includes('metformin') ? 'metformin demonstrates significant efficacy in improving glycemic control. According to Smith et al. (2023), HbA1c reduction was 1.2% in the treatment group (p<0.001).' : 'I can provide evidence-based answers about the uploaded papers. Please ask specific questions about the research findings, methodology, or results.'}`,
                        timestamp: new Date().toISOString()
                    };
                    setMessages(prev => [...prev, botMessage]);
                    setLoading(false);
                }, 1500);
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };

            return (
                <div className="bg-white rounded-lg card-shadow flex flex-col" style={{ height: 'calc(100vh - 300px)' }}>
                    {/* Chat Header */}
                    <div className="border-b p-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-t-lg">
                        <h2 className="text-xl font-bold flex items-center">
                            <i className="fas fa-robot mr-2"></i>
                            Q&A with MedResearch Agent
                        </h2>
                        <p className="text-sm text-indigo-100 mt-1">Ask questions about your uploaded research papers</p>
                    </div>

                    {/* Messages */}
                    <div className="flex-1 overflow-y-auto p-6 space-y-4">
                        {messages.length === 0 && (
                            <div className="text-center py-12">
                                <i className="fas fa-comments text-5xl text-gray-300 mb-4"></i>
                                <h3 className="text-lg font-semibold text-gray-600 mb-2">Start a Conversation</h3>
                                <p className="text-gray-500 text-sm">Ask questions about the uploaded papers</p>
                                <div className="mt-6 space-y-2">
                                    <p className="text-sm text-gray-600 font-medium">Example questions:</p>
                                    <div className="space-y-1">
                                        <button className="block mx-auto text-sm text-indigo-600 hover:text-indigo-800">
                                            "What do these studies say about side effects?"
                                        </button>
                                        <button className="block mx-auto text-sm text-indigo-600 hover:text-indigo-800">
                                            "Compare the sample sizes across papers"
                                        </button>
                                        <button className="block mx-auto text-sm text-indigo-600 hover:text-indigo-800">
                                            "What's the consensus on efficacy?"
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {messages.map(msg => (
                            <div
                                key={msg.id}
                                className={`chat-message flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
                            >
                                <div className={`max-w-3xl ${msg.role === 'user' ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-800'} rounded-lg p-4 shadow`}>
                                    <div className="flex items-center mb-2">
                                        <i className={`fas ${msg.role === 'user' ? 'fa-user' : 'fa-robot'} mr-2`}></i>
                                        <span className="font-semibold text-sm">
                                            {msg.role === 'user' ? 'You' : 'MedResearch Agent'}
                                        </span>
                                    </div>
                                    <p className="text-sm leading-relaxed">{msg.content}</p>
                                    <p className={`text-xs mt-2 ${msg.role === 'user' ? 'text-indigo-200' : 'text-gray-500'}`}>
                                        {new Date(msg.timestamp).toLocaleTimeString()}
                                    </p>
                                </div>
                            </div>
                        ))}

                        {loading && (
                            <div className="chat-message flex justify-start">
                                <div className="bg-gray-100 rounded-lg p-4 shadow">
                                    <div className="flex items-center space-x-2">
                                        <div className="loading-spinner w-4 h-4"></div>
                                        <span className="text-sm text-gray-600">Agent is thinking...</span>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div ref={messagesEndRef} />
                    </div>

                    {/* Input Area */}
                    <div className="border-t p-4">
                        <div className="flex items-center space-x-2">
                            <textarea
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                onKeyPress={handleKeyPress}
                                placeholder="Ask a question about the papers..."
                                className="flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"
                                rows="2"
                            />
                            <button
                                onClick={sendMessage}
                                disabled={!inputMessage.trim() || loading}
                                className="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                <i className="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <p className="text-xs text-gray-500 mt-2">
                            Press Enter to send, Shift+Enter for new line
                        </p>
                    </div>
                </div>
            );
        }

        // Footer Component
        function Footer() {
            return (
                <footer className="bg-gray-800 text-white mt-12">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div className="flex items-center justify-between">
                            <div>
                                <p className="text-sm">
                                    Built with <i className="fas fa-heart text-red-500"></i> for the Bindu Community
                                </p>
                                <p className="text-xs text-gray-400 mt-1">
                                    MedResearch Agent v1.0.0 • Powered by Bindu
                                </p>
                            </div>
                            <div className="flex items-center space-x-4">
                                <a href="https://github.com/getbindu/bindu" className="text-gray-400 hover:text-white transition-colors">
                                    <i className="fab fa-github text-xl"></i>
                                </a>
                                <a href="https://discord.gg/3w5zuYUuwt" className="text-gray-400 hover:text-white transition-colors">
                                    <i className="fab fa-discord text-xl"></i>
                                </a>
                            </div>
                        </div>
                        <div className="mt-4 pt-4 border-t border-gray-700 text-center">
                            <p className="text-xs text-gray-400">
                                ⚠️ Medical Disclaimer: This tool is for educational and research purposes only. 
                                Not medical advice. Consult healthcare professionals for medical decisions.
                            </p>
                        </div>
                    </div>
                </footer>
            );
        }

        // Render App
        ReactDOM.render(<MedResearchApp />, document.getElementById('root'));
    </script>
</body>
</html>
